(this.webpackJsonpe_commerce=this.webpackJsonpe_commerce||[]).push([[0],{41:function(t,e,c){},42:function(t,e,c){},57:function(t,e,c){"use strict";c.r(e);var r=c(1),n=c.n(r),s=c(14),a=c.n(s),o=(c(41),c(42),c(12)),i=c(60),u=c(58),d=c(61),l="PRODUCTS_LOADING",j="LOAD_PRODUCTS_SUCCESS",h="LOADING_FAILED",b="CART_ITEMS_LOADING",p="CART_ITEMS_SUCCESS",O="CART_ITEMS_FAILDED",m="ADD_PRODUCT_TO_CART",f="REMOVE_PRODUCT_FROM_CART",x="CART_QTY_UP",y="CART_QTY_DOWN",g="SHOW_SEARCH_RESULTS",v=function(){return{type:l}},N=function(t){return{type:j,payload:t}},w=function(t){return{type:h,payload:t}},C=function(t){return{type:g,payload:t}},_=function(){return function(t){return t({type:b}),fetch("/cart").then((function(t){if(t.ok)return t;var e=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw e.response=t,e}),(function(t){throw new Error(t.message)})).then((function(t){return t.json()})).then((function(e){return t({type:p,payload:e})})).catch((function(e){return t({type:O,payload:e})}))}},E=function(t){return function(e){var c={_id:t,operation:"up"};return fetch("/cart",{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t;var e=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw e.response=t,e}),(function(t){throw t})).then((function(t){return t.json()})).then((function(c){return e(function(t){return{type:x,payload:t}}(t))})).catch((function(t){console.log("quantity didnt update\nError: "+t.message)}))}},T=function(t){return function(e){var c={_id:t,operation:"down"};return fetch("/cart",{method:"PUT",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t;var e=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw e.response=t,e}),(function(t){throw t})).then((function(t){return t.json()})).then((function(c){return e(function(t){return{type:y,payload:t}}(t))})).catch((function(t){console.log("quantity didnt update\nError: "+t.message)}))}},I=function(t){return function(e){var c={_id:t._id,title:t.title,price:t.price.toFixed(2),description:t.description,category:t.category,image:t.image,qty:1};return fetch("/cart",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return console.log(t),t;var e=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw e.response=t,e}),(function(t){throw t})).then((function(t){return t.json()})).then((function(c){return e(function(t){return{type:m,payload:t}}(t))})).catch((function(t){console.log("new cart item could not be posted\nError: "+t)}))}},R=function(t){return function(e){var c={_id:t};return fetch("/cart",{method:"DELETE",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return console.log(t),t;var e=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw e.response=t,e}),(function(t){throw t})).then((function(t){return t.json()})).then((function(c){return e(function(t){return{type:f,payload:t}}(t))})).catch((function(t){console.log(" cart item could not be deleted\nError: "+t.message)}))}},S=c(2);var k={search:function(t){return C(t)}},L=Object(o.b)(null,k)((function(t){var e=Object(r.useRef)();return Object(S.jsxs)("div",{className:"container my-3",children:[Object(S.jsx)("input",{ref:e,className:"col-md-4 mr-5"}),Object(S.jsx)(u.a,{id:"buttons",className:" col",onClick:function(){return t.search(e.current.value)},children:"Seacrh Products"})]})})),P=c(59),D=function(t){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(P.a,{children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("h1",{id:"text",children:"experience. learn. live.."}),Object(S.jsx)("img",{className:"img-fluid",src:"image3.jpg",alt:"travel"})]})})})},M=c(10),A=c(8),F={fetchProducts:function(){return function(t){return t(v()),fetch("/products").then((function(t){if(t.ok)return t;var e=new Error("Error ".concat(t.status,": ").concat(t.statusText));throw e.response=t,e}),(function(t){throw new Error(t.message)})).then((function(t){return t.json()})).then((function(e){return t(N(e))})).catch((function(e){return t(w(e))}))}},postNewCartItem:function(t){return I(t)},fetchCartItems:function(t){return _()}};var U=Object(A.h)(Object(o.b)((function(t){return{products:t.productsReducer.products,searchResults:t.productsReducer.searchResults,loading:t.productsReducer.isLoading}}),F)((function(t){return Object(r.useEffect)((function(){t.fetchProducts(),t.fetchCartItems()}),[]),t.searchResults?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(D,{}),Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"row justify-content-center",children:[Object(S.jsx)(L,{}),t.searchResults.map((function(e,c){return Object(S.jsxs)(i.a,{id:"prodCard",className:"col-sm-3 mx-2 mb-4",children:[Object(S.jsxs)(M.b,{to:"/products/".concat(e._id),children:[Object(S.jsx)("h5",{children:e.title}),Object(S.jsxs)("h4",{className:"fw-bolder",children:["$",e.price]}),Object(S.jsx)("img",{src:e.image,alt:e.title,width:"100px"}),Object(S.jsx)("p",{className:"mt-auto",children:e.description})]}),Object(S.jsx)(u.a,{id:"buttons",className:"mt-auto",onClick:function(){return t.postNewCartItem(e)},children:"Add to Cart"})]},c)}))]})})]}):t.loading?Object(S.jsx)("div",{children:Object(S.jsx)(d.a,{color:"dark",width:"500",className:"mt-5",children:""})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(D,{}),Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"row justify-content-center",children:[Object(S.jsx)(L,{}),t.products.map((function(e,c){return Object(S.jsxs)(i.a,{id:"prodCard",className:"col-sm-2 mx-2 mb-4",children:[Object(S.jsxs)(M.b,{to:"/products/".concat(e._id),children:[Object(S.jsx)("h5",{children:e.title}),Object(S.jsxs)("h4",{className:"fw-bolder",children:["$",e.price]}),Object(S.jsx)("img",{src:e.image,alt:e.title,width:"100px"}),Object(S.jsx)("p",{className:"my-auto",children:e.description})]}),Object(S.jsx)(u.a,{id:"buttons",className:"mt-auto",onClick:function(){return t.postNewCartItem(e)},children:"Add to Cart"})]},c)}))]})})]})})));var q=Object(A.h)(Object(o.b)((function(t){return{products:t.productsReducer.products}}))((function(t){var e=Object(A.g)().id,c=t.products.find((function(t){return t._id===e}));return Object(S.jsxs)("div",{className:"container mt-5 ",children:[Object(S.jsx)("h1",{children:c.title}),Object(S.jsxs)("h2",{children:["$",c.price]}),Object(S.jsx)("img",{src:c.image,alt:c.name,width:"200px"}),Object(S.jsx)("p",{children:c.description}),Object(S.jsx)(M.b,{className:"btn btn-success",to:"/products",children:"All Products"})]})}))),J=c(27),Q=c.n(J),G=c(33),H=c(21),V=c(62),Y=c(34),$=c.n(Y),W={removeProductFromCart:function(t){return R(t)},putQtyUp:function(t){return E(t)},putQtyDown:function(t){return T(t)},fetchCartItems:function(){return _()}};var B=Object(A.h)(Object(o.b)((function(t){return{cart:t.cartReducer.cartItems}}),W)((function(t){var e=Object(r.useState)(!1),c=Object(H.a)(e,2),n=c[0],s=c[1],a=0;function o(){return(o=Object(G.a)(Q.a.mark((function e(c){var r,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cart.map((function(t){return t.title})),n={token:c,amount:a.toFixed(2),items:r},e.next=4,fetch("/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(e.ok)return alert("Purchase completed. Thank you!"),t.removeProductFromCart(null),s(!0),e;var c=new Error("Error ".concat(e.status,": ").concat(e.statusText));throw c.res=e,c}),(function(t){throw t})).catch((function(t){console.log("Error: "+t.message)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){t.fetchCartItems()}),[]),0!==t.cart.length&&t.cart.forEach((function(t){a+=t.price*t.qty})),n?Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{className:"mt-5 mb-5",children:"Thank you for your purchase!"}),Object(S.jsx)(M.b,{id:"buttons",className:"m-5 p-2",to:"/products",children:"Continue Shopping"})]}):0===t.cart.length?Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{className:"mt-5 mb-5",children:"No Items"}),Object(S.jsx)(M.b,{id:"buttons",className:"m-5 p-2",to:"/products",children:"Continue Shopping"})]}):Object(S.jsxs)("div",{className:"container-lg",children:[Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"table-responsive col-sm-9",children:Object(S.jsxs)(V.a,{striped:!0,reponsive:!0,className:"table table-responsive mt-3 text-right",children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{className:"col-md-2 text-uppercase",children:"Name"}),Object(S.jsx)("th",{className:"col-md-1 text-uppercase",children:"Price"}),Object(S.jsx)("th",{className:"col-md-3 text-uppercase ",children:"Description"}),Object(S.jsx)("th",{className:"col-md-1 text-uppercase",children:"Qty"}),Object(S.jsx)("th",{className:"col-md-1 text-uppercase",children:"Subtotal"})]})}),Object(S.jsx)("tbody",{children:t.cart.map((function(e,c){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{children:e.title}),Object(S.jsxs)("th",{children:["$",e.price]}),Object(S.jsx)("td",{className:"small",children:e.description}),Object(S.jsxs)("td",{children:[Object(S.jsx)(u.a,{className:"btn btn-sm",onClick:function(){return t.putQtyDown(e._id)},children:"-"}),Object(S.jsxs)("span",{children:[" ",e.qty," "]}),Object(S.jsx)(u.a,{className:"btn btn-sm",onClick:function(){return t.putQtyUp(e._id)},children:"+"}),Object(S.jsx)("a",{className:"btn btn-sm mt-auto text-decoration-underline text-center",href:!0,onClick:function(){return t.removeProductFromCart(e._id)},children:"Remove"})]}),Object(S.jsxs)("td",{children:["$",e.price*e.qty]})]},c)}))})]})}),Object(S.jsxs)("div",{className:"col-md-3 mt-3",id:"orderTotal",children:[Object(S.jsx)("h5",{children:"Your Total "}),Object(S.jsxs)("h2",{children:["$",a.toFixed(2)]}),Object(S.jsx)($.a,{stripeKey:"pk_test_51JhRBrECGNUUIhhjpx6b8PpifvHuopYIQoWDrcnJpY8uvFFQlenQj1Dxv45LGMLRIH1bfqWOUd27GYqTlVMH7jP60022nrPrgl",token:function(t){return o.apply(this,arguments)},billingAddress:!0,shippingAddress:!0,amount:100*a})]})]}),Object(S.jsx)(M.b,{to:"/products",children:Object(S.jsx)(u.a,{id:"buttons",className:"mt-3 mb-5",children:"Continue Shopping"})})]})}))),z=c(63),X=c(64),K=c(65),Z=c(66),tt=c(67),et=c(68),ct={search:function(t){return C(t)}},rt=Object(o.b)((function(t){return{cart:t.cartReducer.cartItems}}),ct)((function(t){var e=Object(r.useState)(!1),c=Object(H.a)(e,2),n=c[0],s=c[1];return Object(S.jsx)("div",{className:"sticky-top",children:Object(S.jsx)(z.a,{expand:"md",children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)(X.a,{href:"/",children:Object(S.jsxs)("h2",{children:[" ",Object(S.jsx)("span",{id:"mern",children:"MERN"}),"shop"]})}),Object(S.jsx)(K.a,{onClick:function(){return s(!n)},id:"toggler"}),Object(S.jsxs)(Z.a,{isOpen:n,navbar:!0,children:[Object(S.jsxs)(tt.a,{className:"",navbar:!0,children:[Object(S.jsx)(et.a,{className:"text-start",children:Object(S.jsx)("button",{onClick:function(){return t.search("women")},children:"Women"})}),Object(S.jsx)(et.a,{className:"text-start",children:Object(S.jsx)("button",{onClick:function(){return t.search("men")},children:"Men"})}),Object(S.jsx)(et.a,{className:"text-start",children:Object(S.jsx)("button",{onClick:function(){return t.search("jewelery")},children:"Jewelery"})}),Object(S.jsx)(et.a,{className:"text-start",children:Object(S.jsx)("button",{onClick:function(){return t.search("electronics")},children:"Electronics"})})]}),Object(S.jsxs)(M.b,{to:"/cart",id:"cartIcon",href:"/cart",className:"float-start",children:[Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-bag-fill align-middle m-1",viewBox:"0 0 16 16",children:Object(S.jsx)("path",{d:"M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5z"})}),Object(S.jsx)("span",{className:"align-text-top",children:t.cart.length})]})]})]})})})})),nt=c(16),st=c(35),at=c(36),ot=c.n(at),it=c(5),ut=Object(nt.b)({productsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(it.a)(Object(it.a)({},t),{},{isLoading:!0,errMess:null,products:[]});case j:var c=e.payload.map((function(t){return Object.defineProperty(t,"price",{value:t.price/100})}));return console.log(e.payload),console.log(c),Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,products:c});case h:return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:e.payload});case g:switch(e.payload){case"women":var r=t.products.filter((function(t){return"women's clothing"===t.category}));return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,searchResults:r,products:t.products});case"men":var n=t.products.filter((function(t){return"men's clothing"===t.category}));return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,searchResults:n,products:t.products});case"jewelery":var s=t.products.filter((function(t){return t.category===e.payload}));return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,searchResults:s,products:t.products});case"electronics":var a=t.products.filter((function(t){return t.category===e.payload}));return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,searchResults:a,products:t.products});default:var o=t.products.filter((function(t){return t.title.toLowerCase().includes(e.payload.toLowerCase())||t.description.toLowerCase().includes(e.payload.toLowerCase())}));return t.products.length===o.length&&(o=null),Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,searchResults:o,products:t.products})}default:return t}},cartReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object(it.a)(Object(it.a)({},t),{},{isLoading:!0,errMess:null,cartItems:[]});case p:var c=e.payload.map((function(t){return Object.defineProperty(t,"price",{value:t.price/100})}));return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:null,cartItems:c});case O:return Object(it.a)(Object(it.a)({},t),{},{isLoading:!1,errMess:e.payload});case m:var r=t.cartItems.some((function(t){return t._id===e.payload._id}));return r?Object(it.a)(Object(it.a)({},t),{},{cartItems:t.cartItems.map((function(t){return t.id===e.payload._id&&t.qty++,t}))}):(e.payload.qty=1,Object(it.a)(Object(it.a)({},t),{},{cartItems:t.cartItems.concat(e.payload)}));case f:if(null==e.payload)return Object(it.a)(Object(it.a)({},t),{},{cartItems:[]});var n=t.cartItems.filter((function(t){return t._id!==e.payload}));return Object(it.a)(Object(it.a)({},t),{},{cartItems:n});case x:return Object(it.a)(Object(it.a)({},t),{},{cartItems:t.cartItems.map((function(t){return t._id===e.payload&&t.qty++,t}))});case y:var s=t.cartItems.find((function(t){return t._id===e.payload}));if(s.qty>=2)return Object(it.a)(Object(it.a)({},t),{},{cartItems:t.cartItems.map((function(t){return t._id===e.payload&&t.qty--,t}))});var a=t.cartItems.filter((function(t){return t._id!==e.payload}));return Object(it.a)(Object(it.a)({},t),{},{cartItems:a});default:return t}}}),dt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||nt.c,lt=Object(nt.d)(ut,dt(Object(nt.a)(st.a,ot.a)));var jt=function(){return Object(S.jsx)(o.a,{store:lt,children:Object(S.jsx)(M.a,{children:Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(rt,{}),Object(S.jsxs)(A.d,{children:[Object(S.jsx)(A.b,{path:"/",exact:!0,component:U}),Object(S.jsx)(A.b,{path:"/products/:id",component:q,width:"20%"}),Object(S.jsx)(A.b,{path:"/cart",component:B,width:"20%"}),Object(S.jsx)(A.a,{to:"/"})]})]})})})},ht=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,69)).then((function(e){var c=e.getCLS,r=e.getFID,n=e.getFCP,s=e.getLCP,a=e.getTTFB;c(t),r(t),n(t),s(t),a(t)}))};c(56);a.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(jt,{})}),document.getElementById("root")),ht()}},[[57,1,2]]]);
//# sourceMappingURL=main.1278e75d.chunk.js.map